import{r as n,u as S,a as q,j as e,b as k,c as f,l as F}from"./index-nEi54h7j.js";function O({foodItem:t,onBack:d}){const[h,x]=n.useState(0),[a,g]=n.useState(0),[l,m]=n.useState(""),[c,j]=n.useState(""),[v,i]=n.useState(!1),o=S(),[y,C]=n.useState(!1),[p,u]=n.useState("");if(!q(s=>s.foods).some(s=>s.id===t.id))throw new Error(`El item con id ${t.id} no existe en el menú.`);const E=s=>{const r=parseInt(s.target.value)||0;if(r<0)throw new Error("La cantidad no puede ser negativa");g(r),x(r*t.price)},b=s=>{m(s.target.value)},w=s=>{j(s.target.value)},P=async()=>{if(i(!0),t.quantity>=a){try{o(k({id:t.id,quantity:t.quantity-a})),await o(f({name:t.name,quantity:a,price:t.price*a,client:l,phone:c})),u("Pedido enviado correctamente")}catch(s){console.error("Error al enviar el pedido:",s)}finally{i(!1)}setTimeout(()=>{u(""),d()},2e3)}else F.error("La cantidad del pedido excede al stock existente"),C(!0),i(!1)};return e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx("h3",{children:t.name}),e.jsx("img",{src:`/REDUX/images/${t.image}`,alt:t.name,style:{width:"300px",borderRadius:"8px"}}),e.jsx("p",{children:t.desc}),e.jsxs("p",{children:["Precio: ",h,"€"]}),e.jsx("p",{children:"Cantidad Requerida: "}),e.jsx("input",{type:"number",min:"-10",value:a,onChange:E,style:{padding:"5px",width:"50px"}}),e.jsxs("div",{className:"pedido",children:[e.jsx("input",{type:"text",style:{padding:"5px",width:"250px",margin:"10px"},placeholder:"Introduce tu nombre",value:l,onChange:b}),e.jsx("input",{type:"text",style:{padding:"5px",width:"250px"},placeholder:"Introduce tu numero de telefono",value:c,onChange:w})]})]}),e.jsx("button",{className:"pedir",onClick:P,children:"Pedir"}),e.jsx("button",{className:"volver",onClick:d,children:"Volver al Menú"}),v&&e.jsx(e.Fragment,{children:e.jsx("p",{children:"Procesando Pedido... Por favor espera"})}),y&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"No puedes pedir mas cantidad del stock disponible"}),e.jsxs("p",{children:["El stock disponible es: ",t.quantity]})]}),p&&e.jsx("p",{style:{color:"green",fontWeight:"bold"},children:p})]})}export{O as default};
